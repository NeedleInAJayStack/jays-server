apiVersion: v1
kind: ConfigMap
metadata:
  name: mosquitto
  namespace: mosquitto
data:
  mosquitto.conf: |-
    listener 1883 0.0.0.0
    protocol mqtt

    listener 9001 0.0.0.0
    protocol websockets

    log_dest stdout
    max_inflight_messages 20
    max_queued_messages 1000

    allow_anonymous false
    password_file /mosquitto/config/passwords.conf
    acl_file /mosquitto/config/acl.conf
  acl.conf: |-
    user jay
    pattern readwrite #
